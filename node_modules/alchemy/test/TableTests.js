var Types  = require('../Types')
var Table  = require('../Table')
var Column = require('../Column')

describe('Table', function(){


	it('should correctly return from toState()', function(){

		var table = Table('users', null,
			Column('id', Types.Integer),
			Column('color', Types.String(10))
		)

		var state = table.toState()

		state.name
			.should
			.equal(table.name)

		state.name
			.should
			.equal('users')

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer, color varchar(10));')

	})

	it('should create table with primary key', function(){

		var table = Table('users', null,
			Column('id', Types.Integer, { primaryKey: true })
		)

		table.toState().columns[0].options.primaryKey
			.should
			.equal(true)

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer PRIMARY KEY);')
	})

})