var Types  = require('../Types')
var Table  = require('../Table')
var Column = require('../Column')

describe('Create table', function(){


	it('should build create statement correctly', function(){

		var table = Table('users', null,
			Column('id', Types.Integer),
			Column('color', Types.String(10))
		)

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer, color varchar(10));')

	})

	it('should create table with primary key', function(){

		var table = Table('users', null,
			Column('id', Types.Integer, { primaryKey: true })
		)

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer PRIMARY KEY);')
	})

	it('should work with unique column', function(){
		var table = Table('users', null,
			Column('id', Types.Integer, { primaryKey: true }),
			Column('email', Types.String(100), { unique: true })
		)

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer PRIMARY KEY, email varchar(100) UNIQUE);')
	})

	it('should work with unique not null column', function(){
		var table = Table('users', null,
			Column('id', Types.Integer, { primaryKey: true }),
			Column('email', Types.String(100), { unique: true, notNull: true })
		)

		table
			.toString()
			.should.equal('CREATE TABLE IF NOT EXISTS users (id integer PRIMARY KEY, email varchar(100) UNIQUE NOT NULL);')
	})

})